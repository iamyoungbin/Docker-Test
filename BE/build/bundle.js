(()=>{var e={252:e=>{"use strict";e.exports=require("express")},437:e=>{"use strict";e.exports=require("socket.io")},611:e=>{"use strict";e.exports=require("http")}},o={};function n(r){var s=o[r];if(void 0!==s)return s.exports;var t=o[r]={exports:{}};return e[r](t,t.exports,n),t.exports}(()=>{var e=n(252)(),o=n(611).createServer(e),r=(n(437).Server,n(437)(o,{cors:{origin:"*",methods:["GET","POST"],allowedHeaders:["*"],credentials:!0},pingInterval:1e5,pingTimeout:5e3})),s=new Set;e.get("/",(function(e,o){o.sendFile(__dirname+"/index.html")})),r.on("connection",(function(e){console.log("a user connect"),e.on("",(function(e){switch(console.log(e),console.log(e.code),user=e.data,console.log(s),e.code){case 1001:console.log("connect "+user.nickname);var o=t(user.nickname);r.emit("",o);break;case 1002:console.log("disconnect "+user.userId),u(user);break;case 1003:console.log("participation "+user.userId),c(user)}r.emit("",JSON.stringify(Array.from(s))),console.log(s)})),e.on("disconnect",(function(){console.log(e.id),console.log("클라이언트가 연결을 종료했습니다.")}))}));var t=function(e){return user={userId:s.size,nickname:e,positionX:Math.random(),positionY:Math.random(),direction:2},i(user),user},i=function(e){return s.add(e)},c=function(e){u(e)&&i(e)},u=function(e){var o=e.userId;s.forEach((function(e){if(e.userId===o)return s.delete(e)})),console.log(o)};o.listen(3e3,(function(){console.log("listening on *:3000")}))})()})();